(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{4251:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>r,aR:()=>i});var a=t(71708),l=t(38704),n=t(71646);let r=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-card dark:shadow-card-dark",t),...l})});r.displayName="Card";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...l})});i.displayName="CardHeader";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});c.displayName="CardTitle";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...l})});d.displayName="CardDescription";let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...l})});o.displayName="CardContent",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"},18695:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>el});var a=t(71708),l=t(38704),n=t(54335),r=t(43281),i=t(31143),c=t(58561),d=t(22488),o=t(90448),m=t(39433),u=t(17738),x=t(71646);let h=d.bL;d.YJ;let f=d.WT,p=l.forwardRef((e,s)=>{let{className:t,children:l,...n}=e;return(0,a.jsxs)(d.l9,{ref:s,className:(0,x.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[l,(0,a.jsx)(d.In,{asChild:!0,children:(0,a.jsx)(o.A,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=d.l9.displayName;let g=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(d.PP,{ref:s,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})});g.displayName=d.PP.displayName;let j=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(d.wn,{ref:s,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})});j.displayName=d.wn.displayName;let v=l.forwardRef((e,s)=>{let{className:t,children:l,position:n="popper",...r}=e;return(0,a.jsx)(d.ZL,{children:(0,a.jsxs)(d.UC,{ref:s,className:(0,x.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[(0,a.jsx)(g,{}),(0,a.jsx)(d.LM,{className:(0,x.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(j,{})]})})});v.displayName=d.UC.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(d.JU,{ref:s,className:(0,x.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})}).displayName=d.JU.displayName;let N=l.forwardRef((e,s)=>{let{className:t,children:l,...n}=e;return(0,a.jsxs)(d.q7,{ref:s,className:(0,x.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(d.VF,{children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})}),(0,a.jsx)(d.p4,{children:l})]})});N.displayName=d.q7.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(d.wv,{ref:s,className:(0,x.cn)("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=d.wv.displayName;var b=t(43020);let y=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(b.bL,{ref:s,className:(0,x.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...l,children:(0,a.jsx)(b.C1,{className:(0,x.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})})});function w(e){let{open:s,onOpenChange:t,onSiteAdded:d}=e,[o,m]=(0,l.useState)(""),[u,x]=(0,l.useState)(""),[g,j]=(0,l.useState)("https"),[b,w]=(0,l.useState)("60s"),[k,_]=(0,l.useState)(!1),[S,C]=(0,l.useState)(""),[A,E]=(0,l.useState)(null),[L,R]=(0,l.useState)(!1),[F,D]=(0,l.useState)(null),T=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(s){if(T.current){let e=setTimeout(()=>{var e;null==(e=T.current)||e.focus()},100);return()=>clearTimeout(e)}(0,n.WE)().then(E).catch(e=>{console.error("Failed to fetch config:",e),E({scan_interval:{min_seconds:30,max_seconds:300,range_description:"30s-5m",development_mode:!1}})})}},[s]);let W=e=>{let s=e.match(/^(\d+(?:\.\d+)?)([smh])$/);if(!s)return{seconds:0,valid:!1};let t=parseFloat(s[1]),a=s[2];return{seconds:"s"===a?t:"m"===a?60*t:3600*t,valid:!0}},I=e=>{let s=W(e);if(!s.valid)return{valid:!1,error:'Format must be like "30s", "2m", "1h", or "0.5s"'};if(!A)return{valid:!1,error:"Configuration not loaded"};let{min_seconds:t,max_seconds:a}=A.scan_interval;if(s.seconds<t){let e=t<1?"".concat(Math.round(1e3*t),"ms"):t<60?"".concat(t,"s"):"".concat(Math.round(t/60),"m");return{valid:!1,error:"Must be at least ".concat(e)}}if(s.seconds>a){let e=a<60?"".concat(Math.round(a),"s"):"".concat(Math.round(a/60),"m");return{valid:!1,error:"Must be at most ".concat(e)}}return{valid:!0}},P=e=>"true"!==localStorage.getItem("hideAttackWarning")&&e<5,z=()=>{localStorage.setItem("hideAttackWarning","true")},M=async()=>{R(!1),D(null),await $()},$=async()=>{_(!0),C("");try{let e=u.trim();"ping"===g?(e=e.replace(/^https?:\/\//,""),e="ping://".concat(e)):e.startsWith("http://")||e.startsWith("https://")?"http"===g&&e.startsWith("https://")?e=e.replace("https://","http://"):"https"===g&&e.startsWith("http://")&&(e=e.replace("http://","https://")):e="".concat(g,"://").concat(e),await (0,n.Ae)({name:o.trim(),url:e,scan_interval:b}),m(""),x(""),j("https"),w("60s"),t(!1),d()}catch(e){C(e instanceof Error?e.message:"Failed to add site")}finally{_(!1)}},O=async e=>{if(e.preventDefault(),!o.trim()||!u.trim())return void C("Both name and URL are required");let s=I(b);if(!s.valid)return void C("Scan interval error: ".concat(s.error));let t=W(b);if(t.valid&&P(t.seconds)){D({seconds:t.seconds}),R(!0);return}await $()},Z=e=>{e||(m(""),x(""),j("https"),w("60s"),C("")),t(e)};return(0,a.jsxs)(c.lG,{open:s,onOpenChange:Z,children:[(0,a.jsxs)(c.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(c.c7,{children:[(0,a.jsx)(c.L3,{children:"Add New Site"}),(0,a.jsx)(c.rr,{children:"Add a website or server to monitor using HTTP, HTTPS, or ping monitoring."})]}),(0,a.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"name",className:"text-sm font-medium",children:"Site Name"}),(0,a.jsx)(i.p,{ref:T,id:"name",placeholder:"e.g., My Website",value:o,onChange:e=>m(e.target.value),disabled:k,tabIndex:1})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"monitor-type",className:"text-sm font-medium",children:"Monitoring Type"}),(0,a.jsxs)(h,{value:g,onValueChange:j,disabled:k,children:[(0,a.jsx)(p,{tabIndex:2,children:(0,a.jsx)(f,{placeholder:"Select monitoring type"})}),(0,a.jsxs)(v,{children:[(0,a.jsx)(N,{value:"https",children:"HTTPS - Secure web monitoring"}),(0,a.jsx)(N,{value:"http",children:"HTTP - Standard web monitoring"}),(0,a.jsx)(N,{value:"ping",children:"Ping - Network connectivity check"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"url",className:"text-sm font-medium",children:"ping"===g?"Domain/IP Address":"URL"}),(0,a.jsx)(i.p,{id:"url",type:"ping"===g?"text":"url",placeholder:"ping"===g?"e.g., example.com or 8.8.8.8":"e.g., ".concat(g,"://example.com"),value:u,onChange:e=>x(e.target.value),disabled:k,tabIndex:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"scan-interval",className:"text-sm font-medium",children:"Scan Interval"}),(0,a.jsx)(i.p,{id:"scan-interval",placeholder:"e.g., 60s, 2m, 1h",value:b,onChange:e=>w(e.target.value),disabled:k,tabIndex:4}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["How often to check this site. Use 's' for seconds, 'm' for minutes, or 'h' for hours.",A&&(0,a.jsxs)(a.Fragment,{children:["Range: ",A.scan_interval.range_description,A.scan_interval.development_mode&&(0,a.jsx)("span",{className:"text-orange-600 font-medium",children:" (Dev Mode)"})]})]})]}),S&&(0,a.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:S}),(0,a.jsxs)(c.Es,{children:[(0,a.jsx)(r.$,{type:"button",variant:"outline",onClick:()=>Z(!1),disabled:k,tabIndex:5,children:"Cancel"}),(0,a.jsx)(r.$,{type:"submit",disabled:k,tabIndex:6,children:k?"Adding...":"Add Site"})]})]})]}),(0,a.jsx)(c.lG,{open:L,onOpenChange:R,children:(0,a.jsxs)(c.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(c.c7,{children:[(0,a.jsx)(c.L3,{className:"text-orange-600",children:"⚠️ Short Interval Warning"}),(0,a.jsxs)(c.rr,{className:"space-y-2",children:[(0,a.jsxs)("p",{children:["You've set a very short scan interval of ",(0,a.jsxs)("strong",{children:[null==F?void 0:F.seconds,"s"]}),". Frequent requests (especially under 5 seconds) might be detected as an attack by some websites and could result in:"]}),(0,a.jsxs)("ul",{className:"list-disc list-inside text-sm space-y-1 ml-2",children:[(0,a.jsx)("li",{children:"IP address being blocked or rate-limited"}),(0,a.jsx)("li",{children:"Temporary or permanent bans from the target site"}),(0,a.jsx)("li",{children:'False "down" alerts due to blocked requests'}),(0,a.jsx)("li",{children:"Increased server load on the target website"})]}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"Do you want to proceed with this interval?"})})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y,{id:"hide-warning",onCheckedChange:e=>{e&&z()}}),(0,a.jsx)("label",{htmlFor:"hide-warning",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Don't show this warning again"})]})}),(0,a.jsxs)(c.Es,{children:[(0,a.jsx)(r.$,{type:"button",variant:"outline",onClick:()=>{R(!1),D(null)},children:"Cancel"}),(0,a.jsx)(r.$,{type:"button",variant:"default",onClick:M,className:"bg-orange-600 hover:bg-orange-700",children:"Proceed Anyway"})]})]})})]})}y.displayName=b.bL.displayName;var k=t(69802),_=t(52396),S=t(55779);function C(e){let{open:s,onOpenChange:t,sites:n,onDeleteSites:i}=e,[d,o]=(0,l.useState)([]),[m,u]=(0,l.useState)(!1),x=e=>{e?o(n.map(e=>e.id)):o([])},h=(e,s)=>{s?o(s=>[...s,e]):o(s=>s.filter(s=>s!==e))},f=async()=>{if(0!==d.length&&window.confirm("Are you sure you want to delete ".concat(d.length," site").concat(1!==d.length?"s":"","? This action cannot be undone."))){u(!0);try{await i(d),o([]),t(!1)}catch(e){}finally{u(!1)}}},p=e=>{e||o([]),t(e)},g=e=>{switch(e){case"up":return(0,a.jsx)(k.E,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Online"});case"down":return(0,a.jsx)(k.E,{variant:"destructive",children:"Down"});case"unknown":return(0,a.jsx)(k.E,{variant:"secondary",children:"Unknown"});default:return(0,a.jsx)(k.E,{variant:"outline",children:e})}},j=d.length===n.length&&n.length>0,v=d.length>0&&d.length<n.length;return(0,a.jsx)(c.lG,{open:s,onOpenChange:p,children:(0,a.jsxs)(c.Cf,{className:"max-w-4xl max-h-[80vh]",children:[(0,a.jsxs)(c.c7,{children:[(0,a.jsx)(c.L3,{children:"Delete Sites"}),(0,a.jsx)(c.rr,{children:"Select the sites you want to delete. This action cannot be undone."})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:0===n.length?(0,a.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"No sites to delete."}):(0,a.jsxs)("div",{className:"rounded-md border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-muted/50 border-b",children:[(0,a.jsx)(y,{checked:j,ref:e=>{e&&(e.indeterminate=v)},onCheckedChange:e=>x(e)}),(0,a.jsx)("div",{className:"flex-1 font-medium text-sm",children:0===d.length?"Select sites to delete":"".concat(d.length," site").concat(1!==d.length?"s":""," selected")})]}),(0,a.jsx)("div",{className:"divide-y max-h-[400px] overflow-auto",children:n.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 hover:bg-muted/50",children:[(0,a.jsx)(y,{checked:d.includes(e.id),onCheckedChange:s=>h(e.id,s)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-medium truncate",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,a.jsx)("span",{className:"truncate",children:e.url}),(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:(0,a.jsx)(_.A,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[g(e.status||"unknown"),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.response_time?"".concat(Math.round(1e3*e.response_time),"ms"):"N/A"})]})]},e.id))})]})}),(0,a.jsxs)(c.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>p(!1),disabled:m,children:"Cancel"}),(0,a.jsxs)(r.$,{variant:"destructive",onClick:f,disabled:0===d.length||m,className:"flex items-center gap-2",children:[(0,a.jsx)(S.A,{className:"h-4 w-4"}),m?"Deleting...":"Delete ".concat(d.length," Site").concat(1!==d.length?"s":"")]})]})]})})}var A=t(4251),E=t(45595),L=t(40539),R=t(59135),F=t(82002),D=t(55100),T=t(44444);function W(e){let{stats:s,sites:t}=e;if(!s)return null;let l=s.total_sites>0?(s.sites_up/s.total_sites*100).toFixed(1):"0",n=s.average_response_time?Math.round(1e3*s.average_response_time):0,r=parseFloat(l)>=95?"up":"down",i=parseFloat(l);return(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(A.Zp,{children:[(0,a.jsxs)(A.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(A.ZB,{className:"text-sm font-medium",children:"Total Resources"}),(0,a.jsx)(E.A,{className:"h-4 w-4 text-green-500"})]}),(0,a.jsxs)(A.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.total_sites}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Resources being monitored"})]})]}),(0,a.jsxs)(A.Zp,{children:[(0,a.jsxs)(A.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(A.ZB,{className:"text-sm font-medium",children:"Overall Uptime"}),(0,a.jsx)(L.A,{className:(0,x.cn)("h-4 w-4",i>=99.99?"text-green-500":i>=99.95?"text-yellow-500":"text-red-500")})]}),(0,a.jsxs)(A.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[l,"%"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center",children:["up"===r?(0,a.jsx)(R.A,{className:"mr-1 h-3 w-3 text-green-500"}):(0,a.jsx)(F.A,{className:"mr-1 h-3 w-3 text-red-500"}),i>=99.99?"Excellent uptime":i>=99.95?"Good uptime":"Needs attention"]})]})]}),(0,a.jsxs)(A.Zp,{children:[(0,a.jsxs)(A.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(A.ZB,{className:"text-sm font-medium",children:"Resources Online"}),(0,a.jsx)(D.A,{className:(0,x.cn)("h-4 w-4",((e,s)=>{if(0===s)return"text-muted-foreground";let t=e/s*100;return 100===t?"text-green-500":t>=80?"text-yellow-500":"text-red-500"})(s.sites_up,s.total_sites))})]}),(0,a.jsxs)(A.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.sites_up}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s.sites_down>0&&(0,a.jsxs)("span",{className:"text-red-600",children:[s.sites_down," down"]}),0===s.sites_down&&"All systems operational"]})]})]}),(0,a.jsxs)(A.Zp,{children:[(0,a.jsxs)(A.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(A.ZB,{className:"text-sm font-medium",children:"Avg Response Time"}),(0,a.jsx)(T.A,{className:(0,x.cn)("h-4 w-4",n<=200?"text-green-500":n<=500?"text-yellow-500":"text-red-500")})]}),(0,a.jsxs)(A.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:n>0?"".concat(n,"ms"):"N/A"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center",children:["up"==(n<=500?"up":"down")?(0,a.jsx)(R.A,{className:"mr-1 h-3 w-3 text-green-500"}):(0,a.jsx)(F.A,{className:"mr-1 h-3 w-3 text-red-500"}),n<=200?"Excellent response":n<=500?"Good response":"Slow response"]})]})]})]})}var I=t(50417),P=t(37120),z=t(54411),M=t(43148),$=t(17983),O=t(90180),Z=t(5874),U=t(57209),B=t(10157),K=t(2434);function H(e){let{options:s,selected:t,onChange:n,placeholder:i="Select items...",className:c}=e,[d,m]=l.useState(!1),u=e=>{console.log("Multi-select click detected:",e,"currently selected:",t),t.includes(e)?n(t.filter(s=>s!==e)):n([...t,e])},x=e=>{n(t.filter(s=>s!==e))},h=()=>{let e=s.filter(e=>"all"!==e.value),a=e.map(e=>e.value);console.log("Select All clicked:",{individualValues:a,currentSelected:t,individualOptions:e.map(e=>({value:e.value,label:e.label}))});let l=t.filter(e=>"all"!==e),r=a.length>0&&a.every(e=>l.includes(e))&&l.length===a.length;console.log("Select All state:",{currentIndividualSelected:l,allIndividualSelected:r,willSelect:r?[]:a}),r?(console.log("Deselecting all"),n([])):(console.log("Selecting all individual resources:",a),n(a))};return(0,a.jsxs)("div",{className:c,children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(r.$,{variant:"outline",className:"w-full h-auto min-h-10 justify-between",onClick:()=>m(!d),children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-1 flex-1",children:t.length>0?t.map(e=>{let t=s.find(s=>s.value===e);return(0,a.jsxs)(k.E,{variant:"secondary",className:"text-xs",children:[null==t?void 0:t.label,(0,a.jsx)(K.A,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:s=>{s.preventDefault(),s.stopPropagation(),x(e)}})]},e)}):(0,a.jsx)("span",{className:"text-muted-foreground",children:i})}),(0,a.jsx)(o.A,{className:"h-4 w-4 opacity-50"})]}),d&&(0,a.jsx)(A.Zp,{className:"absolute top-full left-0 right-0 z-50 mt-1",children:(0,a.jsx)(A.Wu,{className:"p-0",children:(0,a.jsxs)("div",{className:"max-h-72 overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-2 border-b",children:(0,a.jsx)(r.$,{variant:"ghost",size:"sm",className:"w-full justify-start",onMouseDown:e=>e.preventDefault(),onClick:e=>{e.preventDefault(),e.stopPropagation(),h()},children:(()=>{let e=s.filter(e=>"all"!==e.value).map(e=>e.value),a=t.filter(e=>"all"!==e);return e.length>0&&e.every(e=>a.includes(e))&&a.length===e.length?"Deselect All":"Select All"})()})}),s.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 hover:bg-accent cursor-pointer",onClick:()=>u(e.value),children:[(0,a.jsx)("div",{className:"h-4 w-4 border rounded-sm ".concat(t.includes(e.value)?"bg-primary border-primary":"border-muted-foreground"),children:t.includes(e.value)&&(0,a.jsx)("div",{className:"h-2 w-2 bg-primary-foreground rounded-sm m-0.5"})}),(0,a.jsx)("span",{children:e.label})]},e.value))]})})})]}),d&&(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)})]})}let G=[{value:"0.000278",label:"Last 1 second",custom:!1},{value:"0.00139",label:"Last 5 seconds",custom:!1},{value:"0.00833",label:"Last 30 seconds",custom:!1},{value:"0.0167",label:"Last 1 minute",custom:!1},{value:"0.0833",label:"Last 5 minutes",custom:!1},{value:"0.25",label:"Last 15 minutes",custom:!1},{value:"1",label:"Last 1 hour",custom:!1},{value:"6",label:"Last 6 hours",custom:!1},{value:"24",label:"Last 24 hours",custom:!1},{value:"168",label:"Last 7 days",custom:!1},{value:"custom",label:"Custom...",custom:!0}],J=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#8dd1e1","#d084d0","#87d068","#ffb347","#ff6b6b","#4ecdc4","#45b7d1","#f39c12"];function V(e){let{sites:s}=e,[t,c]=(0,l.useState)(["all"]),[d,o]=(0,l.useState)("0.0833"),[m,u]=(0,l.useState)(""),[x,g]=(0,l.useState)(!1),[j,b]=(0,l.useState)(null),[y,w]=(0,l.useState)(!0),[_,C]=(0,l.useState)(null),E=[{value:"all",label:"All Resources (Average)"},...s.map(e=>({value:e.id.toString(),label:e.name}))],F=e=>null==e?"No data":e<1?"".concat(e.toFixed(2),"ms"):"".concat(Math.round(e),"ms"),D=e=>{try{let s=e.trim().toLowerCase().match(/^(\d+(?:\.\d+)?)([smhd])$/);if(!s)return null;let t=parseFloat(s[1]);switch(s[2]){case"s":return t/3600;case"m":return t/60;case"h":return t;case"d":return 24*t;default:return null}}catch(e){return null}},T=async()=>{try{let e;w(!0),C(null);let s=t.includes("all")?"all":t.map(e=>parseInt(e));if("custom"===d){if(!m.trim())return void C('Please enter a time range (e.g., "5m", "1h")');let s=D(m);if(console.log("Parsing custom input:",m,"→",s,"hours"),null===s)return void C('Invalid time format. Use formats like "1s", "5m", "2h", "1d"');e=s}else e=parseFloat(d);let a=e<=.01?.017:e<=.1?.083:e<=1?.5:e<=6?1:e<=24?5:60;console.log("Fetching analytics:",{siteIds:s,hours:e,intervalMinutes:a,selectedSites:t,timeRange:d,customTimeInput:m});let l=await (0,n.tj)(s,e,a);console.log("Analytics data received:",l),console.log("Data points:",l.data.length),console.log("Sample data:",l.data.slice(0,3));let r=l.data&&l.data.length>0&&l.data.some(e=>Object.keys(e).filter(e=>e.startsWith("site_")||"average"===e).some(s=>null!==e[s]));console.log("Has valid data points:",r),!r&&l.data.length>0&&console.warn("All data points are null!",l.data),b(l)}catch(e){console.error("Analytics fetch error:",e),C(e instanceof Error?e.message:"Failed to fetch analytics")}finally{w(!1)}};(0,l.useEffect)(()=>{s.length>0&&("custom"!==d||m.trim())&&T()},[t,d,m,s]),(0,l.useEffect)(()=>{s.length>0&&1===t.length&&t[0]},[s]);let W=()=>{if(!j)return[];let e=[];if(console.log("Building display lines...",{selectedSites:t,analyticsDataSites:j.sites,sampleData:j.data[0]}),t.includes("all")&&j.sites.length>=1)if(1===j.sites.length){let s=j.sites[0].id;e.push({key:"site_".concat(s),name:j.sites[0].name,color:"#8884d8",strokeWidth:3}),console.log('Added single site line for "all": site_'.concat(s))}else e.push({key:"average",name:"Average (All Resources)",color:"#8884d8",strokeWidth:3}),console.log("Added average line for multiple sites");return t.includes("all")||t.forEach((s,t)=>{let a=j.sites.find(e=>e.id.toString()===s);a&&(e.push({key:"site_".concat(s),name:a.name,color:J[t%J.length],strokeWidth:2}),console.log("Added line for site: ".concat(a.name," (site_").concat(s,")")))}),console.log("Final display lines:",e),e},K=(()=>{if(!(null==j?void 0:j.data))return null;let e=j.data.filter(e=>t.includes("all")?null!==e.average:t.some(s=>null!==e["site_".concat(s)]));return 0===e.length?null:Math.round(e.reduce((e,s)=>{if(t.includes("all"))return e+(s.average||0);{let a=t.map(e=>s["site_".concat(e)]).filter(e=>null!==e);return e+(a.length>0?a.reduce((e,s)=>e+s,0)/a.length:0)}},0)/e.length)})(),V=()=>{if("custom"===d&&m)return"Last ".concat(m);let e=G.find(e=>e.value===d);return e?e.label.replace("Last ",""):"".concat(d,"h")};return(0,a.jsxs)(A.Zp,{children:[(0,a.jsxs)(A.aR,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A.ZB,{children:"Response Time"}),(0,a.jsx)(A.BT,{children:t.includes("all")?"Average response time across all resources":"Response time for ".concat(t.length," selected resource").concat(1!==t.length?"s":"")})]})]}),null!==K&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[K,"ms"]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-1"}),V()]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[(0,a.jsxs)("div",{className:"sm:w-80",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Resources"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(H,{options:E,selected:t,onChange:e=>{if(console.log("Site selection change:",{selected:e,currentSelectedSites:t}),0===e.length){console.log("No selections, defaulting to all"),c(["all"]);return}if(e.includes("all")&&!t.includes("all")){console.log("All option selected, clearing individual selections"),c(["all"]);return}if(t.includes("all")&&!e.includes("all")){console.log("Switching from all to individual selections:",e),c(e);return}if(!e.includes("all")&&t.includes("all")){console.log("All deselected, keeping individual sites"),c(e.filter(e=>"all"!==e));return}console.log("Normal selection handling:",e),c(e)},placeholder:"Select resources to display...",className:"flex-1"}),(t.length>1||1===t.length&&!t.includes("all"))&&(0,a.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>c(["all"]),className:"text-muted-foreground hover:text-foreground px-2",title:"Clear all selections",children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsxs)("div",{className:"sm:w-48",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Time Range"}),(0,a.jsxs)(h,{value:d,onValueChange:e=>{o(e),g("custom"===e),"custom"!==e&&u("")},children:[(0,a.jsx)(p,{children:(0,a.jsx)(f,{})}),(0,a.jsx)(v,{children:G.map(e=>(0,a.jsx)(N,{value:e.value,children:e.label},e.value))})]}),x&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(i.p,{placeholder:"e.g., 1s, 5m, 2h, 1d",value:m,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&T()},className:"text-sm flex-1"}),(0,a.jsx)(r.$,{size:"sm",onClick:T,disabled:!m.trim()||y,className:"px-3",children:"Fetch"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Format: number + unit (s=seconds, m=minutes, h=hours, d=days)"})]})]})]})]}),(0,a.jsxs)(A.Wu,{children:[y?(0,a.jsx)("div",{className:"h-80 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L.A,{className:"h-5 w-5 animate-pulse"}),(0,a.jsx)("span",{children:"Loading chart data..."})]})}):_?(0,a.jsx)("div",{className:"h-80 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-500 mb-2",children:"Failed to load chart data"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:_})]})}):(null==j?void 0:j.data.length)&&j.data.some(e=>Object.keys(e).filter(e=>e.startsWith("site_")||"average"===e).some(s=>null!==e[s]))?(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(I.u,{width:"100%",height:"100%",children:W().length>1?(0,a.jsxs)(P.Q,{data:j.data,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(z.d,{strokeDasharray:"0",vertical:!1,className:"opacity-10"}),(0,a.jsx)(M.W,{dataKey:"timestamp",tick:{fontSize:12},tickLine:!1,axisLine:!1}),(0,a.jsx)($.h,{tick:{fontSize:12},tickLine:!1,axisLine:!1,label:{value:"Response Time (ms)",angle:-90,position:"insideLeft"}}),(0,a.jsx)(O.m,{content:e=>{let{active:s,payload:t,label:l}=e;return s&&t&&t.length?(0,a.jsxs)("div",{className:"bg-background border rounded-lg p-3 shadow-lg max-w-sm",children:[(0,a.jsx)("p",{className:"font-medium text-sm mb-2",children:l}),t.map((e,s)=>{var t;let l=null==(t=e.dataKey)?void 0:t.toString().match(/site_(\d+)/),n=l?parseInt(l[1]):null,r=n?null==j?void 0:j.sites.find(e=>e.id===n):null;return(0,a.jsxs)("div",{className:"mb-2 last:mb-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm mb-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsxs)("span",{className:"font-medium",children:[e.name,":"]}),(0,a.jsx)("span",{children:F(e.value)})]}),r&&(0,a.jsxs)("div",{className:"ml-5 text-xs text-muted-foreground space-y-0.5",children:[r.hostname&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Host:"})," ",r.hostname]}),r.ip_address&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"IP:"})," ",r.ip_address]}),r.last_checked_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Last check:"})," ",new Date(r.last_checked_at).toLocaleString()]}),r.last_status&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Status:"})," ",(0,a.jsx)("span",{className:"up"===r.last_status?"text-green-600":"text-red-600",children:r.last_status}),r.last_status_code&&" (".concat(r.last_status_code,")")]})]})]},s)})]}):null}}),W().map((e,s)=>(0,a.jsx)(Z.G,{type:"basis",dataKey:e.key,stroke:e.color,fill:e.color,fillOpacity:.1+.05*s,strokeWidth:e.strokeWidth,name:e.name,connectNulls:!0,dot:!1},e.key))]}):(0,a.jsxs)(U.b,{data:j.data,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(z.d,{strokeDasharray:"0",vertical:!1,className:"opacity-10"}),(0,a.jsx)(M.W,{dataKey:"timestamp",tick:{fontSize:12},tickLine:!1,axisLine:!1}),(0,a.jsx)($.h,{tick:{fontSize:12},tickLine:!1,axisLine:!1,label:{value:"Response Time (ms)",angle:-90,position:"insideLeft"}}),(0,a.jsx)(O.m,{content:e=>{let{active:s,payload:t,label:l}=e;return s&&t&&t.length?(0,a.jsxs)("div",{className:"bg-background border rounded-lg p-3 shadow-lg max-w-sm",children:[(0,a.jsx)("p",{className:"font-medium text-sm mb-2",children:l}),t.map((e,s)=>{var t;let l=null==(t=e.dataKey)?void 0:t.toString().match(/site_(\d+)/),n=l?parseInt(l[1]):null,r=n?null==j?void 0:j.sites.find(e=>e.id===n):null;return(0,a.jsxs)("div",{className:"mb-2 last:mb-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm mb-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsxs)("span",{className:"font-medium",children:[e.name,":"]}),(0,a.jsx)("span",{children:F(e.value)})]}),r&&(0,a.jsxs)("div",{className:"ml-5 text-xs text-muted-foreground space-y-0.5",children:[r.hostname&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Host:"})," ",r.hostname]}),r.ip_address&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"IP:"})," ",r.ip_address]}),r.last_checked_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Last check:"})," ",new Date(r.last_checked_at).toLocaleString()]}),r.last_status&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Status:"})," ",(0,a.jsx)("span",{className:"up"===r.last_status?"text-green-600":"text-red-600",children:r.last_status}),r.last_status_code&&" (".concat(r.last_status_code,")")]})]})]},s)})]}):null}}),W().map(e=>(0,a.jsx)(B.N,{type:"basis",dataKey:e.key,stroke:e.color,strokeWidth:e.strokeWidth,dot:!1,name:e.name,connectNulls:!0},e.key))]})})}):(0,a.jsx)("div",{className:"h-80 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(L.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No data available for the selected time range"}),(()=>{let e="custom"===d?D(m):null;return"0.000278"===d||"0.00139"===d||"custom"===d&&null!==e&&e<.01})()&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Sites are checked based on their scan interval. For very short time ranges,",(0,a.jsx)("br",{}),"there might not be any checks within the selected period."]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Debug: ",j?"".concat(j.data.length," data points, time range: ").concat(V()):"No analytics data"]})]})}),j&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Data points: ",j.data.length]}),(0,a.jsxs)("span",{children:["Time range: ",j.time_range.hours,"h"]})]}),t.length>1&&!t.includes("all")&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:t.map((e,s)=>{let t=j.sites.find(s=>s.id.toString()===e);return(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(k.E,{variant:"outline",className:"text-xs cursor-help",style:{borderColor:J[s%J.length]},children:null==t?void 0:t.name}),t&&(0,a.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-popover text-popover-foreground text-sm rounded-md border shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50 min-w-max",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"font-medium",children:t.name}),t.hostname&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Host:"})," ",t.hostname]}),t.ip_address&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"IP:"})," ",t.ip_address]}),t.last_checked_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Last check:"})," ",new Date(t.last_checked_at).toLocaleString()]}),t.last_status&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Status:"})," ",(0,a.jsx)("span",{className:"up"===t.last_status?"text-green-600":"text-red-600",children:t.last_status}),t.last_status_code&&" (".concat(t.last_status_code,")")]}),t.scan_interval&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Interval:"})," ",t.scan_interval]})]}),(0,a.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-border"})]})]},e)})})]})]})]})}var q=t(67006),Y=t(45012);function Q(e){let{sites:s,onDeleteSite:t,onCheckSite:n,isChecking:i}=e,[c,d]=(0,l.useState)("name"),[o,m]=(0,l.useState)("asc"),{isAuthenticated:u}=(0,Y.A)(),h=e=>{c===e?m("asc"===o?"desc":"asc"):(d(e),m("asc"))},f=[...s].sort((e,s)=>{let t,a;switch(c){case"status":t=e.status||"unknown",a=s.status||"unknown";break;case"response_time":t=e.response_time||0,a=s.response_time||0;break;case"url":t=e.url||"",a=s.url||"";break;default:t=e.name.toLowerCase(),a=s.name.toLowerCase()}return t<a?"asc"===o?-1:1:t>a?"asc"===o?1:-1:0}),p=e=>{switch(e){case"up":return(0,a.jsx)(k.E,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Online"});case"down":return(0,a.jsx)(k.E,{variant:"destructive",children:"Down"});case"unknown":return(0,a.jsx)(k.E,{variant:"secondary",children:"Unknown"});default:return(0,a.jsx)(k.E,{variant:"outline",children:e})}},g=e=>null===e?"N/A":"".concat(Math.round(1e3*e),"ms"),j=e=>{if(!e)return"Never";let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/6e4);if(t<1)return"Just now";if(t<60)return"".concat(t,"m ago");let a=Math.floor(t/60);if(a<24)return"".concat(a,"h ago");let l=Math.floor(a/24);return"".concat(l,"d ago")};return(0,a.jsxs)(A.Zp,{children:[(0,a.jsxs)(A.aR,{children:[(0,a.jsx)(A.ZB,{children:"Monitored Resources"}),(0,a.jsx)(A.BT,{children:"Websites and services being monitored for uptime and performance"})]}),(0,a.jsxs)(A.Wu,{children:[(0,a.jsxs)("div",{className:"rounded-md border",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-4 font-medium text-sm bg-muted/50 border-b",children:[(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsxs)("button",{onClick:()=>h("name"),className:"flex items-center hover:text-foreground",children:["Site Name","name"===c&&(0,a.jsx)("span",{className:"ml-1",children:"asc"===o?"↑":"↓"})]})}),(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsxs)("button",{onClick:()=>h("url"),className:"flex items-center hover:text-foreground",children:["URL","url"===c&&(0,a.jsx)("span",{className:"ml-1",children:"asc"===o?"↑":"↓"})]})}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsxs)("button",{onClick:()=>h("status"),className:"flex items-center hover:text-foreground",children:["Status","status"===c&&(0,a.jsx)("span",{className:"ml-1",children:"asc"===o?"↑":"↓"})]})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsxs)("button",{onClick:()=>h("response_time"),className:"flex items-center hover:text-foreground",children:["Response Time","response_time"===c&&(0,a.jsx)("span",{className:"ml-1",children:"asc"===o?"↑":"↓"})]})}),(0,a.jsx)("div",{className:"col-span-2",children:"Last Checked"}),(0,a.jsx)("div",{className:"col-span-1",children:"Actions"})]}),0===f.length?(0,a.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"No sites configured yet. Add your first site to start monitoring."}):(0,a.jsx)("div",{className:"divide-y",children:f.map(e=>{var s;return(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-4 items-center hover:bg-muted/50",children:[(0,a.jsxs)("div",{className:"col-span-3",children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.scan_interval&&"Scanned every ".concat(e.scan_interval)})]}),(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"truncate",children:e.url}),(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-primary hover:text-primary/80 flex-shrink-0",children:(0,a.jsx)(_.A,{className:"h-3 w-3"})})]})}),(0,a.jsx)("div",{className:"col-span-1",children:p(e.status||"unknown")}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("span",{className:(0,x.cn)("font-medium",e.response_time&&e.response_time>.5?"text-red-600":"text-green-600"),children:g(null!=(s=e.response_time)?s:null)}),e.status_code&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Status: ",e.status_code]})]}),(0,a.jsx)("div",{className:"col-span-2 text-sm text-muted-foreground",children:j(e.checked_at)}),(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>n(e.id),disabled:i||!u,title:"Check now",children:(0,a.jsx)(q.A,{className:(0,x.cn)("h-4 w-4",i&&"animate-spin")})}),(0,a.jsx)(r.$,{size:"sm",variant:"ghost",onClick:()=>t(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:!u,title:"Delete site",children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})]})})]},e.id)})})]}),s.length>0&&(0,a.jsx)("div",{className:"flex items-center justify-between px-2 py-4",children:(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[s.length," site",1!==s.length?"s":""," total",s.filter(e=>"up"===e.status).length>0&&(0,a.jsxs)("span",{className:"ml-2",children:["• ",s.filter(e=>"up"===e.status).length," online"]}),s.filter(e=>"down"===e.status).length>0&&(0,a.jsxs)("span",{className:"ml-2 text-red-600",children:["• ",s.filter(e=>"down"===e.status).length," down"]})]})})]})]})}var X=t(4420),ee=t(60015),es=t(5897);function et(){let{theme:e,setTheme:s}=(0,es.D)(),[t,n]=l.useState(!1);return(l.useEffect(()=>{n(!0)},[]),t)?(0,a.jsxs)(r.$,{variant:"ghost",size:"sm",onClick:()=>s("light"===e?"dark":"light"),className:"h-8 w-8 px-0",children:[(0,a.jsx)(X.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(ee.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]}):null}var ea=t(71682);function el(){let[e,s]=(0,l.useState)([]),[t,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(!0),[o,m]=(0,l.useState)(null),[u,x]=(0,l.useState)(!1),[g,j]=(0,l.useState)(!1),[b,y]=(0,l.useState)(!1),[k,_]=(0,l.useState)("30"),{isAuthenticated:E}=(0,Y.A)(),R=async()=>{try{m(null);let[e,t]=await Promise.all([(0,n.$G)(),(0,n.yr)()]);s(e),i(t)}catch(e){m(e instanceof Error?e.message:"Failed to fetch data")}finally{d(!1)}},F=async e=>{try{await (0,n.x_)(e),await R()}catch(e){m(e instanceof Error?e.message:"Failed to delete site")}},D=async()=>{x(!0);try{await (0,n.r2)(),await R()}catch(e){m(e instanceof Error?e.message:"Failed to trigger manual check")}finally{x(!1)}},I=async e=>{await D()},P=async e=>{try{for(let s of e)await (0,n.x_)(s);await R()}catch(e){throw m(e instanceof Error?e.message:"Failed to delete sites"),e}};return((0,l.useEffect)(()=>{if(R(),"off"===k)return;let e=setInterval(R,1e3*parseInt(k));return()=>clearInterval(e)},[k]),c)?(0,a.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L.A,{className:"h-6 w-6 animate-pulse text-primary"}),(0,a.jsx)("span",{className:"text-lg",children:"Loading monitoring data..."})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"border-b bg-card px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Website uptime monitoring overview"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(r.$,{onClick:()=>j(!0),size:"sm",className:"flex items-center space-x-2",disabled:!E,children:[(0,a.jsx)(ea.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add Site"})]}),(0,a.jsxs)(r.$,{onClick:()=>y(!0),variant:"destructive",size:"sm",disabled:0===e.length||!E,className:"flex items-center space-x-2",children:[(0,a.jsx)(S.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Delete Sites"})]}),(0,a.jsxs)(r.$,{onClick:D,variant:"outline",size:"sm",disabled:u||!E,className:"flex items-center space-x-2",children:[(0,a.jsx)(q.A,{className:"h-4 w-4 ".concat(u?"animate-spin":"")}),(0,a.jsx)("span",{children:u?"Checking...":"Check Now"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)(h,{value:k,onValueChange:_,children:[(0,a.jsx)(p,{className:"w-20",children:(0,a.jsx)(f,{})}),(0,a.jsxs)(v,{children:[(0,a.jsx)("div",{className:"px-2 py-1.5 text-sm font-medium text-muted-foreground border-b",children:"Auto-refresh interval"}),[{value:"off",label:"Off"},{value:"1",label:"1s"},{value:"5",label:"5s"},{value:"10",label:"10s"},{value:"30",label:"30s"},{value:"60",label:"1m"},{value:"300",label:"5m"},{value:"600",label:"10m"},{value:"1800",label:"30m"},{value:"3600",label:"1h"}].map(e=>(0,a.jsx)(N,{value:e.value,children:e.label},e.value))]})]})]}),(0,a.jsx)(et,{})]})]})}),(0,a.jsxs)("main",{className:"p-6 space-y-6",children:[o&&(0,a.jsx)(A.Zp,{className:"border-destructive bg-destructive/10",children:(0,a.jsx)(A.Wu,{className:"p-4",children:(0,a.jsx)("p",{className:"text-destructive",children:o})})}),(0,a.jsx)(W,{stats:t,sites:e}),e.length>0&&(0,a.jsx)(V,{sites:e}),(0,a.jsx)(Q,{sites:e,onDeleteSite:F,onCheckSite:I,isChecking:u}),0===e.length&&!o&&(0,a.jsx)(A.Zp,{children:(0,a.jsxs)(A.Wu,{className:"p-12 text-center",children:[(0,a.jsx)(L.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No sites configured yet"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"Start monitoring your websites by adding your first site."}),(0,a.jsxs)(r.$,{onClick:()=>j(!0),className:"flex items-center space-x-2",disabled:!E,children:[(0,a.jsx)(ea.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add Your First Site"})]})]})})]}),(0,a.jsx)(w,{open:g,onOpenChange:j,onSiteAdded:R}),(0,a.jsx)(C,{open:b,onOpenChange:y,sites:e,onDeleteSites:P})]})}},31143:(e,s,t)=>{"use strict";t.d(s,{p:()=>r});var a=t(71708),l=t(38704),n=t(71646);let r=l.forwardRef((e,s)=>{let{className:t,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});r.displayName="Input"},43281:(e,s,t)=>{"use strict";t.d(s,{$:()=>d});var a=t(71708),l=t(38704),n=t(40422),r=t(55048),i=t(71646);let c=(0,r.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,s)=>{let{className:t,variant:l,size:r,asChild:d=!1,...o}=e,m=d?n.DX:"button";return(0,a.jsx)(m,{className:(0,i.cn)(c({variant:l,size:r,className:t})),ref:s,...o})});d.displayName="Button"},45012:(e,s,t)=>{"use strict";t.d(s,{A:()=>i,AuthProvider:()=>r});var a=t(71708),l=t(38704);let n=(0,l.createContext)(void 0);function r(e){let{children:s}=e,[t,r]=(0,l.useState)(null),[i,c]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=localStorage.getItem("apiKey");e&&r(e),c(!1)},[]);let d=async e=>!!(await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:e})})).ok&&(r(e),localStorage.setItem("apiKey",e),document.cookie="apiKey=".concat(e,"; path=/; max-age=86400;"),!0);return(0,a.jsx)(n.Provider,{value:{isAuthenticated:!!t,apiKey:t,isLoading:i,login:d,logout:()=>{r(null),localStorage.removeItem("apiKey"),document.cookie="apiKey=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT;"}},children:s})}function i(){let e=(0,l.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},54335:(e,s,t)=>{"use strict";t.d(s,{$G:()=>l,Ae:()=>n,WE:()=>o,cR:()=>i,r2:()=>d,tj:()=>m,x_:()=>r,yr:()=>c});let a="/api";async function l(){let e=await fetch("".concat(a,"/sites/status"));if(!e.ok)throw Error("Failed to fetch sites status");return e.json()}async function n(e){let s=await fetch("".concat(a,"/sites"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error(await s.text()||"Failed to create site");return s.json()}async function r(e){let s=await fetch("".concat(a,"/sites/").concat(e),{method:"DELETE"});if(!s.ok)throw Error(await s.text()||"Failed to delete site");return s.json()}async function i(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,t=await fetch("".concat(a,"/sites/").concat(e,"/history?limit=").concat(s));if(!t.ok)throw Error("Failed to fetch site history");return t.json()}async function c(){let e=await fetch("".concat(a,"/stats"));if(!e.ok)throw Error("Failed to fetch monitor stats");return e.json()}async function d(){let e=await fetch("".concat(a,"/check/manual"),{method:"POST"});if(!e.ok)throw Error(await e.text()||"Failed to trigger manual check");return e.json()}async function o(){let e=await fetch("".concat(a,"/config"));if(!e.ok)throw Error("Failed to fetch app configuration");return e.json()}async function m(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,l=new URLSearchParams({hours:s.toString(),interval_minutes:t.toString()});e&&"all"!==e?l.append("site_ids",e.join(",")):l.append("site_ids","all");let n=await fetch("".concat(a,"/sites/analytics?").concat(l));if(!n.ok)throw Error("Failed to fetch sites analytics");return n.json()}},58561:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>u,Es:()=>h,L3:()=>f,c7:()=>x,lG:()=>c,rr:()=>p,zM:()=>d});var a=t(71708),l=t(38704),n=t(41967),r=t(2434),i=t(71646);let c=n.bL,d=n.l9,o=n.ZL;n.bm;let m=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});m.displayName=n.hJ.displayName;let u=l.forwardRef((e,s)=>{let{className:t,children:l,...c}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(n.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...c,children:[l,(0,a.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(r.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.UC.displayName;let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};x.displayName="DialogHeader";let h=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};h.displayName="DialogFooter";let f=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});f.displayName=n.hE.displayName;let p=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...l})});p.displayName=n.VY.displayName},69802:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var a=t(71708);t(38704);var l=t(55048),n=t(71646);let r=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)(r({variant:t}),s),...l})}},71646:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(61046),l=t(20839);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.QP)((0,a.$)(s))}},97542:(e,s,t)=>{Promise.resolve().then(t.bind(t,18695))}},e=>{var s=s=>e(e.s=s);e.O(0,[536,280,37,924,579,358],()=>s(97542)),_N_E=e.O()}]);